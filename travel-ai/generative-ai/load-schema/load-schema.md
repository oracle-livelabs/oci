# Create Schema and Load Data

## Introduction

In this lab we will create various table and load data. these tables will be used in other labs in this workshop.

Estimated Time: 20 minutes

### Objectives

In this lab, you will:

- Create Table and Load Data into Autonomous Database

### Prerequisites

- This lab requires completion of the Get Started and Autonomous Database should be already created.
- Oracle APEX workspace should be available and you should have access to create tables

## Task 1: Create ALL_AIRPORTS Table
 
1. The Table ALL\_AIRPORTS will contain data about Airport Names, Latitude, Longitude, Continent, Country and Region information, in addition there is a point based Geometry column SDO\_GEOMETRY. This Geometry column will help us find the nearest Airport from an UNESCO Site selected.

    ```sql
    <copy> 
        CREATE TABLE "ALL_AIRPORTS" 
        (	
        "ID_1" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY 
        MINVALUE 1 MAXVALUE 9999999999999999999999999999 
        INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
        "ID" NUMBER, 
        "IDENT" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "TYPE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "NAME" VARCHAR2(255) COLLATE "USING_NLS_COMP", 
        "LATITUDE" NUMBER, 
        "LONGITUDE" NUMBER, 
        "ELEVATION_FT" NUMBER, 
        "CONTINENT" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "ISO_COUNTRY" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "ISO_REGION" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "MUNICIPALITY" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "SCHEDULED_SERVICE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "GPS_CODE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "LOCAL_CODE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "GEOMETRY" "SDO_GEOMETRY", 
        PRIMARY KEY ("ID_1")
        USING INDEX  ENABLE
        )  DEFAULT COLLATION "USING_NLS_COMP" 
        VARRAY "GEOMETRY"."SDO_ELEM_INFO" STORE AS SECUREFILE LOB 
        VARRAY "GEOMETRY"."SDO_ORDINATES" STORE AS SECUREFILE LOB ; 
    </copy>
    ```
2. To get data Google search *download all airports of the world dataset with latitude and longitude* or bring your own data.  
3. Sample Data

    ![Sample Data](images/airports.png)

## Task 2: Create UNESCO_SITES Table
 
1. The Table UNESCO_SITES will hold site name, region, short description, Latitude, Longitude columns in addition there is a point based Geometry column SDO\_GEOMETRY. This Geometry column will help us find the nearest other UNESCO sites from a selected UNESCO Site.

    ```sql
    <copy> 
    CREATE TABLE "UNESCO_SITES" 
    (	
        "ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 
        MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 
        NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
        "CATEGORY" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "STATES_NAME_EN" VARCHAR2(255) COLLATE "USING_NLS_COMP", 
        "REGION_EN" VARCHAR2(255) COLLATE "USING_NLS_COMP", 
        "UNIQUE_NUMBER" NUMBER, 
        "ID_NO" NUMBER, 
        "REV_BIS" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "NAME_EN" VARCHAR2(255) COLLATE "USING_NLS_COMP", 
        "SHORT_DESCRIPTION_EN" VARCHAR2(32767) COLLATE "USING_NLS_COMP", 
        "JUSTIFICATION_EN" VARCHAR2(32767) COLLATE "USING_NLS_COMP", 
        "DATE_INSCRIBED" NUMBER, 
        "SECONDARY_DATES" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "DANGER" NUMBER, 
        "DATE_END" NUMBER, 
        "DANGER_LIST" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "LONGITUDE" NUMBER, 
        "LATITUDE" NUMBER, 
        "AREA_HECTARES" NUMBER, 
        "CRITERIA_TXT" VARCHAR2(255) COLLATE "USING_NLS_COMP", 
        "CATEGORY_SHORT" VARCHAR2(1) COLLATE "USING_NLS_COMP", 
        "ISO_CODE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "UDNP_CODE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
        "TRANSBOUNDARY" NUMBER, 
        "GEOMETRY" "SDO_GEOMETRY", 
        "TOP_10" VARCHAR2(10) COLLATE "USING_NLS_COMP", 
        "PANORAMA" VARCHAR2(400) COLLATE "USING_NLS_COMP", 
        PRIMARY KEY ("ID")
        USING INDEX  ENABLE
    )  DEFAULT COLLATION "USING_NLS_COMP" 
    VARRAY "GEOMETRY"."SDO_ELEM_INFO" STORE AS SECUREFILE LOB 
    VARRAY "GEOMETRY"."SDO_ORDINATES" STORE AS SECUREFILE LOB ;    
    </copy>
    ```

2. To get data Google search *download all unesco world heritage sites dataset with latitude and longitude* or bring your own data from any of the data sources that you have access.  

3. Sample Data

    ![Sample Data](images/unesco-sites.png)

## Task 3: Create FLIGHT_DATA Table
 
1. You can name this table as FLIGHT\_PRICE\_DATA or just FLIGHTDATA this will used to write Origin, Destination, Return Date, Departure Date and Flight price temporarily as price and dates keep changing.

    ```sql
    <copy> 
        CREATE TABLE "FLIGHTDATA" 
        (	
            "FID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY 
            MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 
            10 START WITH 10 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
            "ORIGIN" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "DESTINATION" VARCHAR2(128) COLLATE "USING_NLS_COMP", 
            "DEPARTUREDATE" DATE, 
            "RETURNDATE" DATE, 
            "PRICE" NUMBER, 
            PRIMARY KEY ("FID")
            USING INDEX  ENABLE
        )  DEFAULT COLLATION "USING_NLS_COMP" ; 
    </copy>
    ```

2. This table does not need any pre-populated data. 
 
## Task 4: Create AIRBNB Table

1. This Table AIRBNB will hold Hostname, neighbourhood, short description, price, room type, Latitude, Longitude columns. Optionally you can generate SDO_GEOMETRY Column from the Latitude and Longitude columns

    ```sql
    <copy> 
        CREATE TABLE "AIRBNB" 
        (	
            "ID_1" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY 
            MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 
            1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
            "ID" NUMBER, 
            "NAME" VARCHAR2(255) COLLATE "USING_NLS_COMP", 
            "HOST_NAME" VARCHAR2(100) COLLATE "USING_NLS_COMP", 
            "NEIGHBOURHOOD_GROUP" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "NEIGHBOURHOOD" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "LATITUDE" NUMBER, 
            "LONGITUDE" NUMBER, 
            "COUNTRY" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "CANCELLATION_POLICY" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "ROOM_TYPE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "CONSTRUCTION_YEAR" NUMBER, 
            "PRICE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "SERVICE_FEE" VARCHAR2(50) COLLATE "USING_NLS_COMP", 
            "MINIMUM_NIGHTS" NUMBER, 
            "NUMBER_OF_REVIEWS" NUMBER, 
            "AVAILABILITY_365" NUMBER, 
            "HOUSE_RULES" VARCHAR2(32767) COLLATE "USING_NLS_COMP", 
            PRIMARY KEY ("ID_1")
            USING INDEX  ENABLE
        )  DEFAULT COLLATION "USING_NLS_COMP" ;
    </copy>
    ```

2. To get data Google search *download airbnb dataset with latitude and longitude information* or bring your own data from any of the data sources that you have access.  

3. Sample Data

    ![Sample Data](images/airbnb.png)

You may now **proceed to the next lab**.

## Learn more

- See the [documentation](https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/autonomous-workflow.html#GUID-5780368D-6D40-475C-8DEB-DBA14BA675C3) on the typical workflow for using Autonomous Data Warehouse.
- Go to the [Data Warehousing Insider blog](https://blogs.oracle.com/datawarehousing/) for more information on network connectivity options mentioned in this workshop.

## Acknowledgements

* **Author** - Madhusudhan Rao B M, Principal Product Manager, Oracle Database
* **Last Updated By/Date** - June 24th, 2023.