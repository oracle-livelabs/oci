# Biometrics with Blockchain

## Introduction

This lab walks you through preventing illicit insider changes to users' biometric data. Permits insert-only SQL operations, with no updates and other modifications allowed, and restricts deletions.
 
Estimated time: 30 minutes

### About Oracle Blockchain

When the pace of business requires secure collaboration with multiple parties, you need a solution to bring everyone together—in real time—to share data. Blockchain provides a collaborative framework for sharing reliable data. Oracle offers easy ways to adopt blockchain technology, including a cloud service, an on-premises edition, and a SaaS application for supply chain.

**Features**

**Immutable Tables:** Prevents illicit insider changes. Permits insert-only SQL operations, with no updates and other modifications allowed, and restricts deletions.

**Blockchain Tables:** Detects illicit hacker changes. Cryptographically chains new rows to existing rows, which enables verification to detect any deletions or updates bypassing DB.

**Distributed Table Digest:** Detects DB rollbacks or authority ordered illicit changes. Enables users to get a schema owner-signed cryptographic digest of the blockchain table and distribute it through REST API, public blockchain, etc.

**User Data Signing:** Prevents fraud by impersonators. Allows end-users to cryptographically sign the data they insert using their private key that is never passed to the database and have the signed data verified using public key in their X.509 certificate.

### Objectives

In this lab, you will:
 
* Create a Blockchain table.
* Insert Biometric data into the blockchain table.
* Demonstrate Blockchain Data Security.

### Prerequisites

This lab assumes you have:

* Completed **Setup environment** and **Create an Oracle Autonomous Database** lab and already logged into OCI console

## Task 1: Login to Oracle APEX workspace

1. Login to Oracle APEX and Create Blockchain Table

2. It is assumed that you already have access to login to Oracle APEX workspace

    ![Blockchain for Biometrics](images/biometry-apex-01.png =30%x* " ")

## Task 2: Create Blockchain Table

1. Post login access **SQL Commands** under **SQL Workshop**

    ![Blockchain for Biometrics](images/biometry-apex-02.png =50%x* " ")

    ```sql
    <copy> 
    CREATE BLOCKCHAIN TABLE  "BIODATA" 
    (    
        "BID" NUMBER GENERATED BY DEFAULT ON NULL 
        AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 
        INCREMENT BY 1 START WITH 1 CACHE 20 
        NOORDER  NOCYCLE  NOKEEP  NOSCALE  
        NOT NULL ENABLE, 
        "FIRST_NAME" VARCHAR2(128), 
        "LAST_NAME" VARCHAR2(128), 
        "DOB" DATE, 
        "MOTHER_NAME" VARCHAR2(128), 
        "CITY_OF_BIRTH" VARCHAR2(128),  
        "COUNTRY_OF_BIRTH" VARCHAR2(128),  
        "FINGER_PRINT" BLOB,
        PRIMARY KEY ("BID") 
    )  
    NO DROP UNTIL 16 DAYS IDLE
    NO DELETE LOCKED
    HASHING USING "SHA2_512" VERSION "v1";
    </copy>
    ```

    > **Note:** Biometric fingerprints or Iris images are not provided as a part of this lab. You can scan your fingerprint and upload it for testing purposes or bring your own biometric data.

2. Review the table created from **Object Browser** under **SQL Workshop**, click on table name

    ![Blockchain for Biometrics](images/biometry-apex-03.png =50%x* " ")

## Task 3: Create an APEX page to add Biometric data

1. Create APEX Application and Create Page
2. Select Interactive Report Page Template
  
    ![Blockchain for Biometrics](images/biometry-apex-04.png =50%x*  " ")

3. Enable **Include Form Page** button and select the Blockchain table

    ![Blockchain for Biometrics](images/biometry-apex-05.png =50%x*  " ")

4. Select the primary key and click on **Create Page**, this will create Interactive report
 
    ![Blockchain for Biometrics](images/biometry-apex-06.png =50%x*  " ")

5. Review and update SQL Query if required

    ![Blockchain for Biometrics](images/biometry-apex-08.png =50%x*  " ")

6. This will also auto generate form page for adding new record.
  
    ![Blockchain for Biometrics](images/biometry-apex-10.png =50%x*  " ")

7. Run the Interactive Report page.
 
    ![Blockchain for Biometrics](images/biometry-apex-09.png =50%x*  " ")

## Task 4: Create an APEX page to Display Biometrics

1. Create a page to Display User names as auto-complete values. However, you can implement this feature in many other ways. For the sake of simplicity, we will select a username from the auto-complete list and display the user's data from the selected name.

    ![Blockchain for Biometrics](images/biometry-apex-15.png =50%x* " ")

2. Display User's Biometric data in a **card layout** based on user's login

    ![Blockchain for Biometrics](images/biometry-apex-16.png =50%x* " ")
 
## Task 5: Application Demo

1. Run the page and add record, by clicking on **Create** 
 
    ![Blockchain for Biometrics](images/biometry-apex-13.png =50%x*  " ")

2. This will open popup window and add user's biometric data, click on **Create**

    ![Blockchain for Biometrics](images/biometry-apex-14.png =50%x*  " ")

4. Display User's data based on user logged in.    

    ![Blockchain for Biometrics](images/biometry-apex-17.png =50%x*  " ")

5. Choose another user

    ![Blockchain for Biometrics](images/biometry-apex-20.png =50%x*  " ")

## Task 6: Blockchain Data Security

1. When you try to delete or update a record, you will get an error message that the record cannot be updated in a Blockchain table.

    ![Blockchain for Biometrics](images/biometry-apex-18.png =50%x*  " ")

2. Review the error message.

    ![Blockchain for Biometrics](images/biometry-apex-19.png =50%x*  " ")
 
This concludes this lab. You can **proceed now to the next lab**.

## Learn More

* [Oracle Blockchain](https://www.oracle.com/blockchain/)
* [Source forbes.com](https://www.forbes.com/sites/forbestechcouncil/2019/01/16/how-to-combine-physiological-biometrics-and-blockchain-for-heightened-security)
 
## Acknowledgements

* **Author** - Madhusudhan Rao B M, Principal Product Manager, Oracle Database
* **Last Updated By/Date** - 4th July, 2023.